<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-游泳攻略" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/10/游泳攻略/" class="article-date">
  <time datetime="2017-06-10T07:23:51.000Z" itemprop="datePublished">2017-06-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Swimming/">Swimming</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/10/游泳攻略/">游泳攻略</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="游泳攻略"><a href="#游泳攻略" class="headerlink" title="游泳攻略"></a><center>游泳攻略</center></h1><p><img width="300" src="/image/swimming/主题.jpg"></p>
<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>　游泳是一种全身性运动，素有“运动之王”的美称，可以避免常规运动可能造成的关节损伤，而且老少皆宜。益处多多，待我一一道来<br>　<br><strong>1、保护身体多处关节的健康</strong> 游泳锻炼是克服水的阻力而不是克服重力， 肌肉和关节不易受伤在游泳时，在水的浮力和阻力的相互作用下，身体能够得到按摩，起到很好的保健作用。</p>
<p><strong>2、能够能起到减肥的作用</strong> 游泳一项全身的运动，因此，随着全身的运动，肌肉会松弛舒展，人体的脂肪消耗得更快（水温低，热量流失快），使得身体更加匀称、协调。</p>
<p><strong>3、改善心血管系统的功能</strong> 游泳时要克服水的阻力需要动用较多的能量，使心率加快，心输出量增大。坚持长期进行游泳锻炼，心脏体积呈运动性增大，心肌收缩有力，安静心率减慢，每搏输出量增加，血管壁增厚，弹性加大，心血管系统的效率得到提高。</p>
<p><strong>4、改善体温调节机能</strong> 由于水的温度一般低于气温，水的导热能力又比空气强数十倍，因此人在水中失散的热量远远快于在空气中。经常游泳能改善体温调节能力，从而更能够承受外界温度的变化。</p>
<p><strong>5、调节内分泌</strong> 游泳还能够起到改善内分泌失调的作用,让人减少焦虑、心态更为平和,皮肤也更加光滑美丽,这些都让女性在性生活中更有魅力，令心情放松。</p>
<p><strong>6、塑造肌肉线条、增强肌肉力度、提高身体柔韧与协调</strong> 游泳动作属于伸展运动，而且需要多肌肉群的协调，因此对于塑形和协调有很大的帮助。</p>
<p><strong>7、改善脊椎问题</strong> 游泳是公认对脊椎有好处的运动，个人觉得更多的是来自蛙泳的好处，蛙泳的时候，头一低一抬，增强后颈肌肉力量，改善驼背和颈椎病。胸椎有肋骨防护，一般很难出现问题，因为两侧有心脏肺等各种主要器官，一旦出现问题，即便是小错位都够受的，划船和蛙泳的划手动作都可以有效的加强胸椎的防护能力。</p>
<p><strong>8、误区</strong> 即便游泳有各种好处，但并不代表你可以随意的游，错误的动作可能带来严重的后果，详见<strong>【常见问题与误区篇】</strong></p>
<h2 id="一、必备装备篇"><a href="#一、必备装备篇" class="headerlink" title="一、必备装备篇"></a>一、必备装备篇</h2><h3 id="（一）泳帽"><a href="#（一）泳帽" class="headerlink" title="（一）泳帽"></a>（一）泳帽</h3><p><strong>作用</strong> 希望在泳池游泳都能自觉戴泳帽，一方面保护自己的头发，也可以减少游泳阻力<br>另一方面也防止脱发影响泳者发挥和泳池的过滤系统。</p>
<p><strong>分类</strong> 泳帽一般分为布帽、PU帽、胶帽。</p>
<ul>
<li><p><strong>布帽</strong> 防水性能差，和头的密合性差，佩戴较为舒适，不推荐；如果是一次性游泳的话布帽是首选，物美价廉，但是一般只有小区泳池可戴布帽，较为标准的泳池大都要求戴PU或胶帽。</p>
</li>
<li><p><strong>PU帽</strong> 复合材料的泳帽，和头的密合性和防水性都是介于布帽和胶帽之间，舒适度一般。</p>
</li>
<li><p><strong>胶帽</strong> 不透水，和头的密合性佳，佩戴有小小紧勒感，最大化的减小阻力，强烈推荐。</p>
</li>
</ul>
<p><strong>佩戴</strong> 泳帽都有折痕，棱边对准眉心，从前往后戴；妹纸的话推荐第二种方法，把泳帽撑开，从后往前，尽量把头发都套住，同样是棱边要对准眉心，如果折痕在两边，无法形容，反正很丑。准确的来说泳帽要套住耳朵防止进水，但是太勒了，不推荐。</p>
<center><img width="300" src="/image/swimming/泳帽的戴法.jpg"><br>（泳帽的正确戴法）</center><br><strong>选择</strong> 最好选择跟泳装同色或近色，当然个性的花花绿绿也是可以的，赚足回头率。<br><br>### （二）泳镜<br><strong>作用</strong> 避免眼睛接触池水后发炎或被感染，不过最主要的原因当然是看妹纸啦。<br><br><strong>分类</strong> 大致特征有大框、小框、镀膜、非镀膜。<br><br><strong>选择</strong><br><br>- 慎选全透明泳镜，看起来眼珠子都要突出来了，你喜欢的话我也拦不住。<br><br>- 莫选大框泳镜，特别是潜水镜，相对来说防水性没有小框的好，而且不好看，略浮夸。<br><br><center><img width="300" src="/image/swimming/大框泳镜.jpg"></center><br>- 一定要买防雾的，特别是冬天。<br><br>- 200度近视以下可以不买近视泳镜，200度以上的不用近视泳镜就是你的损失了，想想有个美女经过而你又看不清，可悲可叹。散光者，散光度数除以2，加上近视的度数，就是理想的泳镜度数。<br><br>- 推荐小框泳镜，防水又专业。<br><br>- 室内选浅色透明（室内较暗，用电镀看不太清）<br><br><center><img width="300" src="/image/swimming/透明泳镜.jpg"></center><br>- 室外选电镀（光线较强，可防紫外线，而且别人看不到你的眼睛，显得比较酷炫高冷，hehe~）。<br><br><center><img width="300" src="/image/swimming/电镀泳镜.jpg"></center>

<p><strong>保养</strong></p>
<ul>
<li><p>切忌用热水洗</p>
</li>
<li><p>镜内莫洗</p>
</li>
<li><p>戴久了要摘一下，防止局部缺氧对眼睛不好</p>
</li>
<li><p>不管买的时候宣传的防雾功能多好，基本用几次就不防雾了，网上卖的防雾剂效果跟直接用洗洁精或者肥皂差不多。或者你也可以像专业选手一样，舔一舔。我试过，口感一般2333</p>
</li>
</ul>
<h3 id="（三）泳装"><a href="#（三）泳装" class="headerlink" title="（三）泳装"></a>（三）泳装</h3><ul>
<li><p><strong>泳裤</strong><br><strong>分类</strong> 泳裤的区分主要是长度，另外是材料（影响泳裤的寿命，然而不管什么材料，不要坐在泳池边，也不要用热水洗，泳裤表示心很累）。</p>
<ul>
<li><strong>长度</strong> 大致分为三角、平角、五分、到脚踝、连体、全覆盖。<ul>
<li>以前面料发展还不发达的时候，以减小阻力为目的尽量减少覆盖面积，所以大多选择低腰三角泳裤，目前的话这类泳裤在西方国家是带有“特定标签”的人使用的，除非你技术棒棒哒，否则还是不要引起误会了。</li>
<li>推荐平角泳裤或五分裤，中规中矩，来看看泳届大佬的装备。<center><img width="300" src="/image/swimming/低边平角泳裤.jpg">（低边平角泳裤）</center><br><center><img width="300" src="/image/swimming/普通平角泳裤.jpg">（普通平角泳裤）</center><br><center><img width="300" src="/image/swimming/五分泳裤.jpg">（五分泳裤）</center></li>
<li>超过五分长的泳裤就不推荐了，由于泳装发展太快太牛逼，各种高科技泳装层出不穷，现在国际比赛已经规定比赛的时候泳裤只能到膝盖。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>泳衣</strong><br><strong>分类</strong> 这里主要针对妹纸来讲，泳衣大致可分为连体和衣裤分离</p>
<ul>
<li>背交叉连体（推荐）<center><img width="300" src="/image/swimming/背交叉连体.jpg"></center></li>
<li>较为时尚流行的背交叉连体（推荐）<center><img width="300" src="/image/swimming/时尚背交叉连体.jpg"></center></li>
<li>三角连体（一般般）<center><img width="300" src="/image/swimming/三角连体.jpg"></center></li>
<li>带小花边连体（泡水还可以，游的话兜水，而且大都是肩带型，不推荐。还不如穿比基尼2333）<center><img width="300" src="/image/swimming/花边泳衣.jpg"></center></li>
<li><p>竞速泳衣（土豪与专业人士可选，相当的紧，上图的背交叉连体就是）</p>
</li>
<li><p>比基尼（男士福音，身材好的不管是认真游还是泡水都很好看，我喜欢2333）</p>
<center><img width="300" src="/image/swimming/比基尼.jpg"></center>

</li>
</ul>
</li>
</ul>
<p><strong>选择</strong> 材料方面没什么研究，一般买贴身速干的就可以了，泡水群众可以买宽松的，专业的可以选择高压缩型的，看看傅爷这表情就知道高压缩型的有多紧了</p>
<center><img width="300" src="/image/swimming/傅爷表情.jpg"></center>

<h3 id="（四）物品寄放"><a href="#（四）物品寄放" class="headerlink" title="（四）物品寄放"></a>（四）物品寄放</h3><p><strong>一般分为以下几种</strong></p>
<ul>
<li><p>押金寄物（有些全退，像长隆那些记得是押50退20酱紫）</p>
</li>
<li><p>投币寄物（一般是一个或两个硬币，坑爹的设计，感觉带钢镚不爽）</p>
</li>
<li><p>自备锁（这种是最好也是最常见的）</p>
</li>
</ul>
<p><strong>锁的选择</strong></p>
<ul>
<li>带钥匙的（不推荐，为了防止钥匙掉落，普通手绳易坏，推荐钥匙手环，几毛钱）<center><img width="300" src="/image/swimming/钥匙手环.jpg"></center></li>
<li>密码锁（推荐，没有钥匙掉落的风险，也不会因为手环影响发挥，一般也就几块钱）</li>
</ul>
<h2 id="二、辅助装备篇"><a href="#二、辅助装备篇" class="headerlink" title="二、辅助装备篇"></a>二、辅助装备篇</h2><h3 id="（一）耳塞"><a href="#（一）耳塞" class="headerlink" title="（一）耳塞"></a>（一）耳塞</h3><p>很少有人戴，而且容易掉水里，比赛都是泳帽直接盖住耳朵达到防水效果</p>
<h3 id="（二）鼻夹"><a href="#（二）鼻夹" class="headerlink" title="（二）鼻夹"></a>（二）鼻夹</h3><p>不是花样游泳一般都不戴，虽说有防鼻子进水的效果，但是容易产生依赖，影响换气的学习。另外，汉子还是不要戴了，妹纸随便，感觉挺好看~</p>
<h3 id="（三）背漂（泳圈同理）"><a href="#（三）背漂（泳圈同理）" class="headerlink" title="（三）背漂（泳圈同理）"></a>（三）背漂（泳圈同理）</h3><p>一般儿童用，不推荐。一样容易产生依赖，影响动作。推荐8字浮板，下面会讲到。</p>
<h3 id="（四）打水浮板"><a href="#（四）打水浮板" class="headerlink" title="（四）打水浮板"></a>（四）打水浮板</h3><ul>
<li>新手必备神器，一般是下图这种，一般用来练打腿<center><img width="300" src="/image/swimming/打水浮板.jpg"></center></li>
<li>墙裂推荐，理由是它可以像上面的浮板一样用来练打腿，也可以，夹在腿间让下半身浮起来，用来练手划水动作（不推荐背漂的原因）。<center><img width="300" src="/image/swimming/8字浮板.jpg"></center>

</li>
</ul>
<h3 id="（五）跟屁虫-漂流包-潜浮包"><a href="#（五）跟屁虫-漂流包-潜浮包" class="headerlink" title="（五）跟屁虫/漂流包/潜浮包"></a>（五）跟屁虫/漂流包/潜浮包</h3><ul>
<li>不管水性如何，野泳的时候一定要带，尊重自己与他人的生命。（不会游的最好不要野泳，这种也只是对会游的有基本的保障）</li>
<li>常见的跟屁虫长这样，橙色有警醒作用，小的不能储物，大的可以放点东西，不过不能太多，基本满足。<br><center><img width="300" src="/image/swimming/小跟屁虫.jpg">（小跟屁虫）</center><br><center><img width="300" src="/image/swimming/大跟屁虫.jpg">（大跟屁虫）</center><br>不过现在大都流行这种漂流包，比较好看，可以承受更大的重量，切记，表买单肩的<br><center><img width="300" src="/image/swimming/漂流包.jpg"></center><h3 id="（六）划水掌"><a href="#（六）划水掌" class="headerlink" title="（六）划水掌"></a>（六）划水掌</h3>现在划水掌做得都很好看了，各式各样，自行选择</li>
</ul>
<p><strong>作用</strong> 适用中高阶爬泳者，可以有效改正手臂划水的动作，增大划水面积，可以划得更快，最主要的还是为了手臂力量得到训练。不要过份依赖，戴久了会导致腿打水时转跨配合力度变小，不戴的时候协调性就变差了。</p>
<p><strong>选择</strong> 买跟手掌差不多大小的就行，不要买太大的，费力不说，还容易受伤。</p>
<h3 id="（七）脚蹼"><a href="#（七）脚蹼" class="headerlink" title="（七）脚蹼"></a>（七）脚蹼</h3><p><strong>作用</strong> 练蝶泳必备，可以让你更好的感受到身体的波动，纠正姿势，保持上下S型前进的动力。</p>
<p><strong>选择</strong> 买游泳型的就行，如图</p>
<center><img width="300" src="/image/swimming/游泳脚蹼.jpg"></center><br>不要买成下面这种潜水型的，不过这种用来练波动好像更好。<br><br><center><img width="300" src="/image/swimming/潜水脚蹼.jpg"></center>

<h3 id="（八）其它"><a href="#（八）其它" class="headerlink" title="（八）其它"></a>（八）其它</h3><ul>
<li><p>呼吸管（分游泳和潜水用，游泳的可以忽略呼吸专心练动作，不推荐。我主张先适应水先学会换气再学动作）</p>
</li>
<li><p>阻力裤（原理是兜水，加重阻碍前进，用以力量训练）</p>
</li>
<li><p>拉力筋（一头绑腰上，手拿着另一头，用以力量训练）</p>
</li>
</ul>
<h2 id="三、沐浴装备篇"><a href="#三、沐浴装备篇" class="headerlink" title="三、沐浴装备篇"></a>三、沐浴装备篇</h2><p><strong>理由</strong> 特别是泳池，大都加了混凝剂和一些含氯的消毒品，对头发跟皮肤有一定的伤害，所以游泳必备篇的装备防水性很重要。同时，沐浴用品也很重要，我一般洗完回去再洗都还有一点点漂白水的味道，想象以下如果游泳后就简单冲一下，等回去再洗，期间氯在你身上悠哉的进行化学反应，啧啧。</p>
<p><strong>清单</strong> </p>
<ul>
<li><p>洗发水</p>
</li>
<li><p>护发素（可以游之前涂一点在泳帽内侧，厉害了2333）</p>
</li>
<li><p>沐浴露</p>
</li>
<li><p>毛巾/浴巾</p>
</li>
<li><p>拖鞋</p>
</li>
<li><p>吹风筒</p>
</li>
</ul>
<p><strong>选择</strong> </p>
<ul>
<li><p>现在有去氯的沐浴用品，用后也没啥区别，心理作用。觉得普通的平时用的就行（不懂，保留意见）</p>
</li>
<li><p>毛巾/浴巾必须有有木有，忘带的时候用衣服擦干，唉~都是泪。</p>
</li>
<li><p>拖鞋不一定要，带的话会方便很多，洗完后脚湿的总不能直接穿鞋吧。</p>
</li>
<li><p>有些游泳馆有吹风筒（少见），有些没有，妹纸有需要可以自带吹风筒，不过没啥必要，因为大多泳馆并没有插头。/无辜脸</p>
</li>
</ul>
<p><strong>分装瓶</strong> 大大小小的瓶子带起来不方便咋办，放包里可能还会漏出来（说多都是泪），推荐这种分装瓶，最好买压嘴的，白色透明的话可以根据颜色分清是什么，不用像我一样贴标签，而且有个卡扣，不怕不小心压到，用起来比较方便，几毛钱一个，不过加上邮费就贵了。</p>
<center><img width="300" src="/image/swimming/分装瓶.jpg"></center>

<h2 id="四、技术篇（视频学习较好）"><a href="#四、技术篇（视频学习较好）" class="headerlink" title="四、技术篇（视频学习较好）"></a>四、技术篇（视频学习较好）</h2><p>小生浅见，欢迎大佬斧正。</p>
<p><strong>水性</strong> 解释以下水性是什么，不是你游多快，会多少种游法，体力多好，耐力多好。而是指对水的适应程度，如果你泳镜突然掉了或者突然抽筋了，你就变得很紧张，那只能说你水性还不到家。这也是很多新手的问题，对水的恐惧感。</p>
<p><strong>水感与呼吸</strong> 不建议直接上来就是干，新手要先体验一下水感，可以在浅水区行走，感受水的波动，然后尝试向前、向侧、向后的走、跑、跳，。</p>
<p>适应了之后练习呼吸，不管什么运动，呼吸都是重中之重，要领是出水口吸气，不要用鼻子，会呛水。入水口鼻吐气，重点在鼻吐气，一般很累很喘的时候才用到口吐气，入水的时候不要憋气，入水临界点的时候就开始吐气，不要吐尽，吐尽就会有憋的感觉，留一口气在出水的临界点吐掉，然后快速在吸一口，赛过活神仙。</p>
<p>虽然我是主张先打好基础在练动作的，但是这种练习显得很枯燥，初学者会觉得很无聊，在现在快节奏的生活和快餐文化的氛围下，初学者学水感和呼吸的时候不会有丝毫成就感，容易厌倦。但是游前5分钟的练习和适应还是很有必要的（不论新手老手）</p>
<p><strong>狗爬</strong> 顾名思义就是像狗一样手脚扒水，大多数江湖海边玩大的基本都是狗爬，俺一开始也是，这是一种本能反应，3个月大的婴儿就开始有的踢踏反射动作，淹也淹不死，游也游不快，毕竟费力和low了点，学点比赛泳姿还是有必要的。</p>
<center><img width="300" src="/image/swimming/狗爬式.jpg"></center>

<p><strong>仰泳</strong> 可用反蛙泳、反爬泳、反蝶泳法游，没专门练过，不发表意见，放个妹纸镇场。</p>
<center><img width="300" src="/image/swimming/蝶仰泳.jpg"></center>

<p><strong>蛙泳</strong> 蛙泳分手和脚的练习，脚有三个动作：收、翻、蹬，手的动作也有三个：划水，收手，伸手。</p>
<p>　<strong>收</strong> 双腿伸直，腿往胸口收（没那么夸张，形象一点而已），最多和身体呈90度</p>
<center><img width="300" src="/image/swimming/收腿.jpg"></center><br>　<strong>翻</strong> 重点动作，翻不过来是柔韧度不够，需要配合压筋练习。膝盖外翻，脚尖向外（这是重点），可以在陆上让人抓着脚练习，让肌肉记忆动作。<br><center><img width="300" src="/image/swimming/蛙泳翻腿.jpg"></center><br><center><img width="300" src="/image/swimming/蛙泳抓腿.jpg"></center><br>　<strong>蹬夹</strong> 这里其实是两个动作，一个是向两侧蹬，一个是双腿并拢。必须连贯起来（画弧形，这是腿法精髓，前进动力在此）<br><center><img width="300" src="/image/swimming/蛙泳蹬夹.jpg"></center><br>　<strong>划水</strong> 划水分为外划和内划，外划的时候想象一下手往两边拨开一层水<br>　<br><center><img width="300" src="/image/swimming/蛙泳外划.jpg"></center><br>　内划在外划的基础上，手弯曲角度大概120度<br>　<br><center><img width="300" src="/image/swimming/蛙泳内划.jpg"></center><br>　<strong>收手</strong> 收手即为抱水，这是手部动作的精髓，在泳池里经常可以看到很多人划到腰间再收回来，这是错误的，我称之为养生蛙，不能笑（哈哈哈~），抱水应该在胸口进行抱水，看一下大佬的抱水动作，想象一下手里托着个宝贝<br>　<br><center><img width="300" src="/image/swimming/蛙泳抱水.jpg"></center><br>　<strong>伸手</strong> 这个没什么讲的，就是从抱水后的一个前冲动作，要记住伸手之后才蹬腿<br>　<br><center><img width="300" src="/image/swimming/蛙泳伸手蹬夹.jpg"></center><br>　<strong>配合</strong> 外划腿不动，内划慢收腿，收手后收腿，伸手快蹬夹，手脚伸直漂一会<br>　<br><strong>爬泳</strong> 爬泳就是常说的自由泳，详见【常见问题篇】，也是分为手和腿的练习，大多数培训都是从蛙泳开始教起，个人认为蛙泳动作复杂，不适合初学，爬泳动作较为简单，容易产生前进力，初学者容易找到成就感，不会中途放弃，废话不多说，一般从打腿开始练习<br><br>　<strong>打腿第一阶段</strong> 因为初学者腿部柔韧性不够，所以要拉筋拉筋拉筋，重要的事说三遍，一开始还比较僵硬，要点是膝盖和脚绷直（不要蹦死，易抽筋，放松，有点弯曲也可以接受），然后就上下小幅度的打水即可<br>　<br>　<strong>打腿第二阶段</strong>  腿像鞭子一样打水，大腿是手臂，小腿是棍子，棍子本身是不发力的，只有手臂发力才能发挥作用，爬泳打腿也是，要大腿带动小腿打水，如果感觉小腿弯曲后用力打水就是错误的（这就是第一阶段要膝盖绷直练的原因），另外，打水的时候内八，力学问题，不用刻意，基本都是很自然就内八的。<br>　<br><center><img width="300" src="/image/swimming/爬泳腿法.jpg"></center>

<p>　<strong>打腿第三阶段</strong> 这是精髓，腿可以自然打水后，注意力放在髋部，上文说的大腿带动小腿，其实发力点是通过髋部的转动带动的，从侧面看比较好理解，这个时候腿相对于水平面来说不是上下打水，而是要做一个转动打水的动作。</p>
<center><img width="300" src="/image/swimming/爬泳转髋.jpg"></center>

<p>　<strong>打腿第四阶段</strong> 这里讲打腿频率，初学的时候都是死命的打，谁管你二次腿四次腿还是六次腿，最常见的就是六次腿（指的是左右手划动一次打腿的次数），很多人感觉爬泳很累，因为大多数人都是用六次甚至毫无规律的频率来打水的，六次腿只会在冲刺阶段用到，如果用这种频率在平时嬉戏中，不累才怪。四次腿比较少见，这里主要讲二次腿，长游必备。说白了真正掌握爬泳呼吸规律的时候可以很自然控制打腿频率。动作跟我们走路一样，一次手一次腿，不要顺拐喽（只要记住左手伸右腿打，右手伸左腿打就可以），看到【打腿第三阶段】那里的图没有，那个动作的下一步就是右手入水（伸），这时图中的左腿是在上方的，当右手伸的时候左腿就向下打腿，自行领悟。<br>　<br>　<strong>手臂第一阶段</strong> 手伸直做预备态，开始划水，手臂之间呈120度角度向后划水，练习的时候拇指擦着打腿经过把划水动作进行到底</p>
<center><img width="300" src="/image/swimming/爬泳划手.jpg"></center><br><center><img width="300" src="/image/swimming/爬泳划水到底.jpg"></center><br>　<strong>手臂第二阶段</strong> 空中移臂，这是最精髓也是最容易出错的地方，切记，爬泳划水的任何时候，<strong>肘的位置都是高于手的</strong>，把意念都放在肘上，想象肘带着你的手在运动，有助于练习。最好回去看镜子练习，做不出动作的再说三遍压筋压筋压筋。下图分别为错误示范，柔韧度不够但是正确的移臂以及正确的移臂<br>　<br><center><img width="300" src="/image/swimming/爬泳错误移臂.jpg">这种就是手高于肘，移臂很累又不好看</center><br><center><img width="300" src="/image/swimming/爬泳柔韧性不够的移臂.jpg">这个动作是对的，只是柔韧性不够，手抬得太高了 </center><br><center><img width="300" src="/image/swimming/爬泳正确移臂.jpg">正确的爬泳移臂</center>

<p>　<strong>手臂第三阶段</strong> 入水，角度如图，这里要讲一下两手的配合，在长游的时候，一只手完全入水后另一手才开始划水，只有比赛的时候为了速度，才需要在移臂准备入水的时候另一手开始划水。</p>
<center><img width="300" src="/image/swimming/爬泳手臂入手.jpg"></center><br>　<strong>换气</strong> 一般是划3次手换一次气，我体力不足，反正我基本10来分钟后就都是2次手换一次气（这里就要注意不要只一边换气了，详见【常见问题篇】），千万不要一次换一下，那是不可能的，看起来就是左边甩一下，右边甩一下，看着都费劲。<br>　<br>　换气的时机在于哪只手划水，就哪边换气，从开始划水到移臂结束为吸气阶段，入水开始吐气，看到没有，吸气的阶段很足，这就是爬泳适合长游的原因，速度快又不费劲。练习的时候，手开始划的时候下巴贴着锁骨，眼睛往斜后方看。正确的换气是只露出半个泳镜（如手臂第三阶段图），不用担心呛水，人前进的时候嘴边形成了真空地带，不用怕，做不到的整个脸都向上，也可以，像下面这种。<br><br><center><img width="300" src="/image/swimming/爬泳换气.jpg"></center>

<p><strong>蝶泳</strong>  终于讲到我最喜欢的了，蝶泳在实际游泳中并没有太大的作用。但作为一种运动项目，最主要的意义还是在于锻炼，爆发力强，对身体协调能力要求高。所以短时间内力量需求和热量消耗更大。对上肢肌肉锻炼效果明显。还有一个最最重要的理由，蝶泳可以装逼，无限美感，清场必备。咳咳，下面开始入门</p>
<p>　<strong>蝶泳腿第一阶段</strong> 也叫海豚腿，任何泳姿比赛起跳的时候都会采用蝶泳腿，为什么，快。<br>　陆上练习：看过钢管舞的身体波动没有（搜舞蹈wave），对着镜子练，我觉得我一个汉子练这个也还看得下去2333，建议练全身，港真，实际只要练腿也可以啦。如图，先顶跨，然后膝盖弯曲，屁股后翘，不要直接站直，膝盖往回收，画个弧度回归</p>
<center><img width="300" src="/image/swimming/海豚泳陆地练习.jpg"></center><br>　水里练习：最好戴个脚蹼，可以感受身体的波动，练习的时候压胸产生前进动力，后半身随波逐流，屁股稍微抬一下露出水面，这个阶段会有点久，一开始会一直往水下潜，慢慢习惯就可以了。<br><br><center><img width="300" src="/image/swimming/海豚腿水中练习.jpg"></center>

<p>　<strong>蝶泳腿第二阶段</strong> 当可以很自然的作出海豚腿的动作的时候，你会发现，游不快，这个时候意念就不要放在压胸上了，用力甩动你的腰，你会飞快的前进，这里小小练习一下就能进阶了。<br>　<br>　<strong>手臂练习</strong> 蝶泳手臂跟爬泳完全一样，可以在陆地先单手练，然后双手练。<br>　<br>　<strong>单手蝶</strong> 单手蝶的练习是很有必要的，蝶泳的时候累了可以用单手蝶过度一下。单手蝶不需要像双手蝶那样配合，像爬泳一样，一只手划水，然后用海豚泳的腿法打水1-3下都可以。<br>　<br>　<strong>蛙腿蝶手/蝶腿蛙手</strong> 主要为了游的时候着重练习蝶手或蝶腿，体会手脚配合的节奏。<br>　<br>　<strong>配合（难点）</strong> 重中之重的部分，文字比较难表达，建议看慢蝶的视频，容易看出端倪。这里分别讲手跟腿的时机。全身伸直做预备状态，开始抱水划水，腰微塌下去，脚自然就上来了，如图</p>
<center><img width="300" src="/image/swimming/蝶泳第二次打腿预备.jpg"></center><br>接下来是第一次打腿也是最重要的一次，重点发力，带动身体出水，吸气，要感觉身体是贴着水面的前进的，不要为了吸气成直力型。如图，看出水角度<br><br><center><img width="300" src="/image/swimming/蝶泳第二次打腿.jpg"></center><br>接下来空中移臂的过程很快结束，手入水，两手入水姿势同爬泳，注意间隔差不多与肩同宽，不用特别在意，手入水的瞬间还没入水，迅速做第二次打腿，这次力道可以小一点，这个时候手刚好入水，用抬腰（有一种把屁股网上甩的感觉），为下一次打腿做准备。<br><br><center><img width="300" src="/image/swimming/蝶泳第一次打腿.jpg"></center><br><center><img width="300" src="/image/swimming/蝶泳第一次打腿1.jpg"></center>

<p>　<strong>换气</strong> 蝶泳的换气跟蛙泳有异曲同工之妙，划水的时候出水吸气，手出水的时候低头吐气。<br>　<br>　<strong>暴力蝶与慢蝶</strong> 两者的区别是暴力蝶在于速度，而慢蝶适合长游。上文讲的都是暴蝶，而慢蝶慢在滑行，就是腰发力的时候，还有一个显著的地方，就如上文第二次打腿的时候，本来应该手还没入水就开始迅速打腿，而慢蝶恰恰是等入水后再悠哉悠哉的打一下腿，再滑行一下，除了抱水跟打腿都要迅速，其它整体节奏放慢。<br>　<br>　<strong>注意</strong> 蝶泳需要很高的协调力，即便慢蝶也需要很好的体力和耐力，否则蝶个100米就累了，这<br>里讲累的时候出现的问题，因为身体腰腹力量是短板，其它肌肉还有余力的时候，腰已经没力，这种时候很容易不自觉的切换成小腿打水，这是常见现象，我也是这样玩得不亦乐乎的。不过建议动作变<br>形就不要继续了。</p>
<p><strong>转身与跳水</strong> 只做出摸墙转身和爬泳的背泳翻滚转身动作，不标准，没专门学过就不发表意见了。</p>
<h2 id="五、常见问题篇"><a href="#五、常见问题篇" class="headerlink" title="五、常见问题篇"></a>五、常见问题篇</h2><ul>
<li>游泳会使肌肉线条拉长，在于塑形，并不能练出大块肌肉，器械健身在于紧实肌肉，如果两者配合简直无敌。</li>
<li>学游泳不止水里要练，陆地练习也很重要，可以看着镜子，模拟水中动作，看看自己是否动作变形，多练习，让肌肉记忆动作。</li>
<li>有些人动作永远做不好，是身体柔韧性不够，需要配合陆地的压筋联系。</li>
<li>其它泳姿动作错误会影响游泳速度，但是要特别注意爬泳和单手蝶，在泳池可以看到很多人游着游着就游偏了，而且只能单边换气，这是因为双手双脚力量不对等导致的，出现这种情况一定要着重练某一边的力量。如果爬泳做不到三划一换气，可以半场一边换气，下半场换另一半换气。单手蝶同理。如果不注意的话，可能造成严重后果，两边肌肉不平衡反而对脊椎不好。</li>
<li>一个常识误区，自由泳的意思是你可以用任何泳姿游，只是在比赛的时候由于爬泳速度最快，所以自由泳都采取爬泳的姿势。so，记住就好，不要闹笑话。</li>
<li>腰不好不要蝶泳，好好静养吧。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/10/游泳攻略/" data-id="cj3uwjix2003vw02y2evuyqil" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swimming/">Swimming</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用kong管理api" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/05/使用kong管理api/" class="article-date">
  <time datetime="2017-06-05T06:42:16.000Z" itemprop="datePublished">2017-06-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/kong/">kong</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/05/使用kong管理api/">使用kong管理api</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>摘要：Kong，Mashape开源的API层。是基于Nginx_Lua模块写的。是一个基于openresty的api代理层，数据采用了 Apache Cassandra/PostgreSQL存储，并且提供了一些优秀的插件，比如验证，日志，调用频次限制等。</em><br>详细资料见官网：<a href="https://getkong.org" target="_blank" rel="external">https://getkong.org</a><br>环境：ubuntu 16.04<br>1、下载kong：<a href="https://getkong.org/install/" target="_blank" rel="external">https://getkong.org/install/</a> 在此页面选择你的系统，之后再下载相应的系统版本，因为我是 unbuntu 16.04，则下载<a href="https://github.com/Mashape/kong/releases/download/0.10.3/kong-0.10.3.xenial_all.deb" target="_blank" rel="external">https://github.com/Mashape/kong/releases/download/0.10.3/kong-0.10.3.xenial_all.deb</a></p>
<p>2、安装kong，根据官网提示，执行下面三条命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update</div><div class="line">$ sudo apt-get install openssl libpcre3 procps perl</div><div class="line">$ sudo dpkg -i kong-0.10.3.*.deb</div></pre></td></tr></table></figure></p>
<p>3、kong的使用肯定需要存储一些自己的数据，目前支持PostgreSQL和Cassandra两种数据库，这里以postgresql为例进行安装</p>
<p>3.1 添加postgresql源：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo touch /etc/apt/sources.list.d/pgdb.list</div><div class="line">$ sudo vim /etc/apt/sources.list.d/pgdb.list</div></pre></td></tr></table></figure></p>
<p>3.2 将下文添加到pgdb.list中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deb https://apt.postgresql.org/pub/repos/apt/ trusty-pgdg main</div></pre></td></tr></table></figure></p>
<p>3.3 执行如下命令添加postgresql安装包的秘钥：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo wget --quiet -O - https://postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -</div></pre></td></tr></table></figure></p>
<p>3.4 安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install postgresql-9.4</div></pre></td></tr></table></figure></p>
<p>3.5 验证是否成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ dpkg -l |grep postgresql</div></pre></td></tr></table></figure></p>
<p>3.6 看到如下信息则为成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ii  pgdg-keyring                                2017.1                                     all          keyring for apt.postgresql.org</div><div class="line">ii  postgresql-9.4                              9.4.12-1.pgdg14.04+1                       amd64        object-relational SQL database, version 9.4 server</div><div class="line">ii  postgresql-client-9.4                       9.4.12-1.pgdg14.04+1                       amd64        front-end programs for PostgreSQL 9.4</div><div class="line">ii  postgresql-client-common                    182.pgdg14.04+1                            all          manager for multiple PostgreSQL client versions</div><div class="line">ii  postgresql-common                           182.pgdg14.04+1                            all          PostgreSQL database-cluster manager</div><div class="line">ii  postgresql-contrib-9.4                      9.4.12-1.pgdg14.04+1                       amd64        additional facilities for PostgreSQL</div></pre></td></tr></table></figure></p>
<p>3.7 postgres是超级管理员，类似mysql的root和sqlserver的sa，一开始是没有密码的，用超级管理员登录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo -i -u postgres</div></pre></td></tr></table></figure></p>
<p>3.8 创建一个数据库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">createdb kongdb</div></pre></td></tr></table></figure></p>
<p>3.8.1 如果出现类似createdb: 无法联接到数据库 template1: 无法联接到服务器: 没有那个文件或目录<br>    服务器是否在本地运行并且在 Unix 域套接字<br>    “/var/run/postgresql/.s.PGSQL.5432”上准备接受联接?的错误则切回ubuntu的登录用户，执行下列操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ sudo service postgresql start</div><div class="line">$ sudo systemctl unmask postgresql</div><div class="line">$ sudo systemctl restart postgresql</div><div class="line">$ sudo service postgresql start</div></pre></td></tr></table></figure></p>
<p>3.9 创建角色（这里我在psql工具中创建一直不成功不知为啥，所以用sql来创建）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create user kong</div></pre></td></tr></table></figure></p>
<p>3.10 通过postgresql的客户端来实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">psql</div></pre></td></tr></table></figure></p>
<p>3.11 为”kong”用户设置密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\password 123456</div></pre></td></tr></table></figure></p>
<p>3.12 把数据库 kongdb的所有者设置为 kong<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alter database kongdb owner to kong</div></pre></td></tr></table></figure></p>
<p>3.13 介绍一下一些基本的命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">\help 查看psql工具的命令</div><div class="line">\q 退出</div><div class="line">\du 查看所有用户（刚才创建后用这个查一下）</div><div class="line">\l 查看所有数据库（同上）</div></pre></td></tr></table></figure></p>
<p>3.14 用 \q 命令退出并用kong用户登录kongdb数据库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">psql -d kongdb -U kong -h 127.0.0.1 -W</div></pre></td></tr></table></figure></p>
<p>3.15 这时会提示输入密码，输入刚才设置的123456即可</p>
<p>4、为kong配置数据源，找到/usr/local/share/lua/5.1/kong/templates/中的kong_defaults.lua，将里面的pg_pssword = NONE改为刚才设置的123456，pg_database = kong改为刚才创建的kongdb，如果无意外的话，这里可以启动kong了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo kong start</div></pre></td></tr></table></figure></p>
<p>5、查阅官网kong的api操作，不同版本可能参数不同，这里以0.10.x版本为例，详见： <a href="https://getkong.org/docs/0.10.x/getting-started/adding-your-api/" target="_blank" rel="external">https://getkong.org/docs/0.10.x/getting-started/adding-your-api/</a><br>6、安装curl，如果已经装过git可能会有冲突，我这里就遇到了，记录一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install curl</div></pre></td></tr></table></figure></p>
<p>6.1 报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl : 依赖: libcurl3-gnutls (= 7.47.0-1ubuntu2) 但是 7.47.0-1ubuntu2.2 正要被安装</div></pre></td></tr></table></figure></p>
<p>6.2 一开始不清楚原因，执行了$ sudo apt-get update，出现了如下错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">E: 无法获得锁 /var/lib/apt/lists/lock - open (11: 资源暂时不可用) </div><div class="line">E: 无法对目录 /var/lib/apt/lists/ 加锁</div></pre></td></tr></table></figure></p>
<p>6.3 解决方法，强制删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo rm /var/cache/apt/archives/lock</div><div class="line"></div><div class="line">$ sudo rm /var/lib/dpkg/lock</div></pre></td></tr></table></figure></p>
<p>6.4 <strong>6.3、6.4两个操作其实是没必要的，只是作为记录</strong>这里说说6.1的问题，重新安装 sudo apt-get install libcurl3-gnutls是没用的，这里是包冲突，需要指定版本来安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install libcurl3-gnutls=7.47.0-1ubuntu2</div></pre></td></tr></table></figure></p>
<p>6.5 安装完后再执行一下$ sudo apt-get install curl即可</p>
<p>7、将业务侧的api加到kong中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -i -X POST --url http://localhost:8001/apis/ --data &apos;name=test&apos; --data &apos;upstream_url=http://192.168.0.1:8080/&apos; --data &apos;uris=/&apos;</div></pre></td></tr></table></figure></p>
<p>7.1 这里需要说明，根据官网/apis/接口request body参数说明中，hosts、uris、methods需要至少指定一个，不赘述<br>7.2 name指的是在kong api中的一个名字标识，具有唯一性，这里创建了test后，不允许再创建同名，若上方命令执行两次会报错<br>7.3 可以到/usr/local/kong/logs中查看日志</p>
<p>8、然后就可以用kong来转发请求了，在<a href="https://getkong.org/docs/0.10.x/getting-started/adding-your-api/中有这么一句：" target="_blank" rel="external">https://getkong.org/docs/0.10.x/getting-started/adding-your-api/中有这么一句：</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Issue the following cURL request to verify that Kong is properly forwarding requests to your API. Note that by default Kong handles proxy requests on port :8000</div></pre></td></tr></table></figure></p>
<p>所以这里可以用 <a href="http://localhost:8000/" target="_blank" rel="external">http://localhost:8000/</a> + 资源的方法访问<a href="http://192.168.0.1:8080/" target="_blank" rel="external">http://192.168.0.1:8080/</a> 下所有的资源</p>
<p>9、Kong的一个非常诱人的地方就是提供了大量的插件来扩展应用，通过设置不同的插件可以为服务提供各种增强的功能。执行下面命令可以查看kong的所有插件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -i -X GET --url http://localhost:8001/plugins/enabled</div></pre></td></tr></table></figure></p>
<p>9.1 用Rate Limiting来控制访问访问次数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -i -X POST --url http://localhost:8001/apis/test/plugins/ --data &quot;name=rate-limiting&quot; --data &quot;config.minute=5&quot;</div></pre></td></tr></table></figure></p>
<p>接着随访找一个接口连续访问6次，如 <a href="http://localhost:8000/test" target="_blank" rel="external">http://localhost:8000/test</a> 这个接口，第6次的时候就会提示 {“message”: “API rate limit exceeded”}<br>9.2 另外kong集成了Galileo和Datadog，只要有账号就可以监控一些数据，具体到各自官网了解详情，另外Runscope是收费的，没有试过。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/05/使用kong管理api/" data-id="cj3uwjiwo0037w02yn8ppzvnf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kong/">kong</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-springboot+rabbitmq简单使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/27/springboot+rabbitmq简单使用/" class="article-date">
  <time datetime="2017-05-27T03:40:31.000Z" itemprop="datePublished">2017-05-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/27/springboot+rabbitmq简单使用/">springboot+rabbitmq简单使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>搭建springboot的时候比较喜欢用多模块管理，所以先新建一个父maven程序，select archetype时选择maven-archetype-site-simple，创建完后，pom.xml如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>per.example.mq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>example-mq-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">	</div><div class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>example-mq-parent<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line">			<span class="comment">&lt;!-- Import dependency management from Spring Boot --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">			<span class="comment">&lt;!--如果要把springboot工程打包成war执行，需要该jar --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-legacy<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>到此父maven就完成，把项目下的src文件夹删了，具体看实际需求<br>在父maven项目上右键新建maven module，选择maven-archetype-webapp创建一个web项目，完成，这里都是以eclipse为例，子maven的pom.xml如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></div><div class="line">	<span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>per.example.mq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>example-mq-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>example-mq-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>example-mq-server Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 项目编码配置 start --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 项目编码配置 end --&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 要使用LOG4J，去掉该依赖 --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="comment">&lt;!-- 使用log4j，不使用默认的logback --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="comment">&lt;!-- 要打成war包执行，需要该依赖 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-legacy<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="comment">&lt;!-- 要打成war包执行，去掉内嵌的tomcat --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="comment">&lt;!-- 引入mq包 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>sq580-mq-server<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>先创一个简单的app来测试springboot启动有没有问题，在最外层的包目录下创建一个Application.java类，必须在外层，如pre.example.mq路径下创建<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> pre.example.mq;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.context.web.SpringBootServletInitializer;</div><div class="line"></div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder application)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> application.sources(Application.class);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		SpringApplication.run(Application.class, args);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在pre.example.mq路径下创建一个controller包，然后创建一个TestController.Java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> pre.example.mq.controller;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</div><div class="line"></div><div class="line"><span class="keyword">import</span> pre.example.mq.mq.data.service.MqSendService;</div><div class="line"></div><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="meta">@EnableAutoConfiguration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="keyword">private</span> MqSendService mqSendService;</div><div class="line">	</div><div class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</div><div class="line">    <span class="meta">@ResponseBody</span></div><div class="line">    <span class="function">String <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">	    <span class="comment">// 这个再这里暂时还没有用，可以先注释</span></div><div class="line">		mqSendService.sendBindMsg();</div><div class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</div><div class="line">    &#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>完成，点击项目执行Run As - Java Application也可以，直接像普通的web项目在tomcat下启动也可以，如果8080端口被占，前者要在配置里修改访问端口，后者跟平常使用无异，springboot还可以配置彩色日志，为了快速开发，此处都不赘述，启动后会看到类似下方的界面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">  .   ____          _            __ _ _</div><div class="line"> /\\ / ___&apos;_ __ _ _(_)_ __  __ _ \ \ \ \</div><div class="line">( ( )\___ | &apos;_ | &apos;_| | &apos;_ \/ _` | \ \ \ \</div><div class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</div><div class="line">  &apos;  |____| .__|_| |_|_| |_\__, | / / / /</div><div class="line"> =========|_|==============|___/=/_/_/_/</div><div class="line"> :: Spring Boot ::        (v1.3.5.RELEASE)</div><div class="line"></div><div class="line">[2017-05-27 10:57:23.677] boot - 9464  INFO [localhost-startStop-1] --- Application: Starting Application on Yangshaokun-PC with PID 9464 (E:\apache-tomcat-7.0.67\webapps\wtpwebapps5\sq580-mq-server\WEB-INF\classes started by Yangshaokun in E:\eclipse)</div><div class="line">[2017-05-27 10:57:23.679] boot - 9464  INFO [localhost-startStop-1] --- Application: The following profiles are active: develop</div><div class="line">[2017-05-27 10:57:23.744] boot - 9464  INFO [localhost-startStop-1] --- AnnotationConfigEmbeddedWebApplicationContext: Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@294536ae: startup date [Sat May 27 10:57:23 CST 2017]; root of context hierarchy</div><div class="line">[2017-05-27 10:57:25.200] boot - 9464  INFO [localhost-startStop-1] --- PostProcessorRegistrationDelegate$BeanPostProcessorChecker: Bean &apos;org.springframework.amqp.rabbit.annotation.RabbitBootstrapConfiguration&apos; of type [class org.springframework.amqp.rabbit.annotation.RabbitBootstrapConfiguration$$EnhancerBySpringCGLIB$$4d0a742a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</div><div class="line">[2017-05-27 10:57:25.239] boot - 9464  INFO [localhost-startStop-1] --- [/sq580-mq-server]: Initializing Spring embedded WebApplicationContext</div><div class="line">[2017-05-27 10:57:25.239] boot - 9464  INFO [localhost-startStop-1] --- ContextLoader: Root WebApplicationContext: initialization completed in 1496 ms</div><div class="line">[2017-05-27 10:57:25.710] boot - 9464  INFO [localhost-startStop-1] --- TomcatWebSocketContainerCustomizer: NonEmbeddedServletContainerFactory detected. Websockets support should be native so this normally is not a problem.</div><div class="line">[2017-05-27 10:57:26.017] boot - 9464  INFO [localhost-startStop-1] --- ServletRegistrationBean: Mapping servlet: &apos;dispatcherServlet&apos; to [/]</div><div class="line">[2017-05-27 10:57:26.018] boot - 9464  INFO [localhost-startStop-1] --- FilterRegistrationBean: Mapping filter: &apos;errorPageFilter&apos; to: [/*]</div><div class="line">[2017-05-27 10:57:26.018] boot - 9464  INFO [localhost-startStop-1] --- FilterRegistrationBean: Mapping filter: &apos;characterEncodingFilter&apos; to: [/*]</div><div class="line">[2017-05-27 10:57:26.019] boot - 9464  INFO [localhost-startStop-1] --- FilterRegistrationBean: Mapping filter: &apos;hiddenHttpMethodFilter&apos; to: [/*]</div><div class="line">[2017-05-27 10:57:26.019] boot - 9464  INFO [localhost-startStop-1] --- FilterRegistrationBean: Mapping filter: &apos;httpPutFormContentFilter&apos; to: [/*]</div><div class="line">[2017-05-27 10:57:26.019] boot - 9464  INFO [localhost-startStop-1] --- FilterRegistrationBean: Mapping filter: &apos;requestContextFilter&apos; to: [/*]</div><div class="line">[2017-05-27 10:57:26.122] boot - 9464  INFO [localhost-startStop-1] --- AmqpConfig: recieveQueue:dataToCare_defaultrabbitmqIp:112.74.209.184:5672</div><div class="line">[2017-05-27 10:57:26.361] boot - 9464  INFO [localhost-startStop-1] --- RequestMappingHandlerAdapter: Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@294536ae: startup date [Sat May 27 10:57:23 CST 2017]; root of context hierarchy</div><div class="line">[2017-05-27 10:57:26.473] boot - 9464  INFO [localhost-startStop-1] --- RequestMappingHandlerMapping: Mapped &quot;&#123;[/test]&#125;&quot; onto java.lang.String com.sq580.mq.controller.TestController.one()</div><div class="line">[2017-05-27 10:57:26.481] boot - 9464  INFO [localhost-startStop-1] --- RequestMappingHandlerMapping: Mapped &quot;&#123;[/error]&#125;&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)</div><div class="line">[2017-05-27 10:57:26.481] boot - 9464  INFO [localhost-startStop-1] --- RequestMappingHandlerMapping: Mapped &quot;&#123;[/error],produces=[text/html]&#125;&quot; onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)</div><div class="line">[2017-05-27 10:57:26.514] boot - 9464  INFO [localhost-startStop-1] --- SimpleUrlHandlerMapping: Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</div><div class="line">[2017-05-27 10:57:26.514] boot - 9464  INFO [localhost-startStop-1] --- SimpleUrlHandlerMapping: Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</div><div class="line">[2017-05-27 10:57:26.559] boot - 9464  INFO [localhost-startStop-1] --- SimpleUrlHandlerMapping: Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</div><div class="line">[2017-05-27 10:57:26.988] boot - 9464  INFO [localhost-startStop-1] --- AnnotationMBeanExporter: Registering beans for JMX exposure on startup</div><div class="line">[2017-05-27 10:57:26.998] boot - 9464  INFO [localhost-startStop-1] --- DefaultLifecycleProcessor: Starting beans in phase -2147482648</div><div class="line">[2017-05-27 10:57:26.998] boot - 9464  INFO [localhost-startStop-1] --- DefaultLifecycleProcessor: Starting beans in phase 2147483647</div><div class="line">[2017-05-27 10:57:27.156] boot - 9464  INFO [SimpleAsyncTaskExecutor-1] --- CachingConnectionFactory: Created new connection: SimpleConnection@35b4193e [delegate=amqp://openapi@112.74.209.184:5672/openapi]</div><div class="line">[2017-05-27 10:57:27.346] boot - 9464  INFO [localhost-startStop-1] --- Application: Started Application in 4.331 seconds (JVM running for 7.63)</div><div class="line">[2017-05-27 10:57:27.359] boot - 9464  INFO [main] --- Http11AprProtocol: Starting ProtocolHandler [&quot;http-apr-9094&quot;]</div><div class="line">[2017-05-27 10:57:27.374] boot - 9464  INFO [main] --- AjpAprProtocol: Starting ProtocolHandler [&quot;ajp-apr-8049&quot;]</div><div class="line">[2017-05-27 10:57:27.375] boot - 9464  INFO [main] --- Catalina: Server startup in 6336 ms</div></pre></td></tr></table></figure></p>
<p>看到这里没有报错就说明成功了，下面开始来配置mq，mq的选择可以自己查询资料做对比，此处以rabbitmq为例，在子maven中要引入包，见pom.xml，在src/main/resources目录下创建一个application.yml或者properties文件，这里以yml为例<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="attr">spring:</span></div><div class="line">  profiles.active: develop</div><div class="line"></div><div class="line"><span class="meta">---</span></div><div class="line"><span class="attr">spring:</span></div><div class="line"><span class="attr">  profiles:</span> develop</div><div class="line"><span class="attr">  output:</span> </div><div class="line"><span class="attr">    ansi:</span> </div><div class="line"><span class="attr">      enabled:</span> detect</div><div class="line">      </div><div class="line"><span class="attr">rabbitmq:</span></div><div class="line"><span class="attr">  ip:</span> 你的mq服务器ip:<span class="number">5672</span></div><div class="line"><span class="attr">  user:</span> guest</div><div class="line"><span class="attr">  password:</span> guest</div><div class="line"><span class="attr">  virtualHost:</span> myhost</div><div class="line"><span class="attr">  app:</span></div><div class="line"><span class="attr">    reciveQueue:</span> xxx(队列名)</div><div class="line"><span class="meta">---</span></div></pre></td></tr></table></figure></p>
<p>这样准备工作就做完了，mq的工作流程、原理、搭建此处不赘述，上官网下一个mq包，解压，运行即可，跟redis类似，上述配置文件中的output.ansi.enabled是开启彩色日志的。<br>首先，在pre.example.mq路径下创建config包，再创建一个AmqpConfig.java，如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> pre.example.mq.config;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.AcknowledgeMode;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.Binding;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.BindingBuilder;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.Message;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.TopicExchange;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.CachingConnectionFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.ConnectionFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.ChannelAwareMessageListener;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.ConfigurableBeanFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.rabbitmq.client.Channel;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AmqpConfig</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger LOG = LoggerFactory.getLogger(AmqpConfig.class);</div><div class="line"></div><div class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;rabbitmq.app.reciveQueue&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String recieveQueue;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;rabbitmq.ip&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String rabbitmqIp;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;rabbitmq.user&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String rabbitmqUser;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;rabbitmq.password&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String rabbitmqPassword;</div><div class="line">	</div><div class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;rabbitmq.virtualHost&#125;"</span>)</div><div class="line">	<span class="keyword">private</span> String virtualHost;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXCHANGE = <span class="string">"spring-boot-exchange"</span>;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 不管是发送端还是接收端，都需要创建这个</div><div class="line">	 */</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> ConnectionFactory <span class="title">connectionFactory</span><span class="params">()</span> </span>&#123;</div><div class="line">		CachingConnectionFactory connectionFactory = <span class="keyword">new</span> CachingConnectionFactory();</div><div class="line">		connectionFactory.setAddresses(rabbitmqIp);</div><div class="line">		connectionFactory.setUsername(rabbitmqUser);</div><div class="line">		connectionFactory.setPassword(rabbitmqPassword);</div><div class="line">		connectionFactory.setVirtualHost(virtualHost); <span class="comment">// 如果不设置这个，默认在根目录</span></div><div class="line">		connectionFactory.setPublisherConfirms(<span class="keyword">true</span>); <span class="comment">// 显示调用，才能进行消息的回调。</span></div><div class="line">		<span class="keyword">return</span> connectionFactory;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 发送者发送消息需要RabbitTemplate提供api，此处消费者不需要</div><div class="line">	 */</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="meta">@Scope</span>(ConfigurableBeanFactory.SCOPE_PROTOTYPE)</div><div class="line">	<span class="comment">// 最好为prototype类型</span></div><div class="line">	<span class="function"><span class="keyword">public</span> RabbitTemplate <span class="title">rabbitTemplate</span><span class="params">()</span> </span>&#123;</div><div class="line">		RabbitTemplate template = <span class="keyword">new</span> RabbitTemplate(connectionFactory());</div><div class="line">		<span class="keyword">return</span> template;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 针对消费者配置 1. 设置交换机类型 2. 将队列绑定到交换机 FanoutExchange:</div><div class="line">	 * 将消息分发到所有的绑定队列，无routingkey的概念 HeadersExchange ：通过添加属性key-value匹配</div><div class="line">	 * DirectExchange:按照routingkey分发到指定队列 TopicExchange:多关键字匹配</div><div class="line">	 */</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> TopicExchange <span class="title">defaultExchange</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> TopicExchange(EXCHANGE);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Queue <span class="title">queue</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Queue(recieveQueue, <span class="keyword">true</span>); <span class="comment">// 队列持久</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 这里有必要记录一下，这里queue跟exchange绑定了，</div><div class="line">	 * 也就是生产者发消息到该exchange后，</div><div class="line">	 * exchange会根据routingKey关键字发送到符合规则的queue中去，</div><div class="line">	 * 如果不符合则丢弃，如果上rabbitmq的管理后台看的话可以看到即便项目关闭，</div><div class="line">	 * exchang和queue还是存在绑定关系，看到defaultExchange()方法中，</div><div class="line">	 * 创建的topicExchange使用了spring-boot-exchange这个名字，</div><div class="line">	 * 如果临时想换个类型的交换机，则需要使用不同的exchang名字，</div><div class="line">	 * 不然的话会报错，或者直接到管理后台把exchang或删了</div><div class="line">	 */</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Binding <span class="title">binding</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// 绑定队列到交换机中，并使用关键字匹配，后面会讲到关键字的匹配</span></div><div class="line">		<span class="keyword">return</span> BindingBuilder.bind(queue()).to(defaultExchange())</div><div class="line">				.with(<span class="string">"info.red.#"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 消费者接收消息并作出应答，确保消息不会因为消费者的奔溃而被丢弃</div><div class="line">	 */</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> SimpleMessageListenerContainer <span class="title">messageContainer</span><span class="params">()</span> </span>&#123;</div><div class="line">		LOG.info(<span class="string">"recieveQueue:"</span> + recieveQueue + <span class="string">"rabbitmqIp:"</span> + rabbitmqIp);</div><div class="line">		SimpleMessageListenerContainer container = <span class="keyword">new</span> SimpleMessageListenerContainer(</div><div class="line">				connectionFactory());</div><div class="line">		container.setQueues(queue());</div><div class="line">		container.setExposeListenerChannel(<span class="keyword">true</span>);</div><div class="line">		container.setMaxConcurrentConsumers(<span class="number">1</span>);</div><div class="line">		container.setConcurrentConsumers(<span class="number">1</span>);</div><div class="line">		container.setAcknowledgeMode(AcknowledgeMode.MANUAL); <span class="comment">// 设置确认模式手工确认</span></div><div class="line">		container.setMessageListener(<span class="keyword">new</span> ChannelAwareMessageListener() &#123;</div><div class="line"></div><div class="line">			<span class="meta">@Override</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessage</span><span class="params">(Message message, Channel channel)</span></span></div><div class="line">					<span class="keyword">throws</span> Exception &#123;</div><div class="line">				<span class="keyword">byte</span>[] body = message.getBody();</div><div class="line">				LOG.info(<span class="string">"receive msg : "</span> + <span class="keyword">new</span> String(body));</div><div class="line">				System.out.println(<span class="string">"receive msg : "</span> + <span class="keyword">new</span> String(body));</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					channel.basicAck(message.getMessageProperties()</div><div class="line">							.getDeliveryTag(), <span class="keyword">false</span>); <span class="comment">// 确认消息成功消费</span></div><div class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">					LOG.error(<span class="string">"消费队列失败:"</span> + <span class="string">""</span>, e);</div><div class="line">					<span class="comment">// 重试一次</span></div><div class="line">					channel.basicNack(message.getMessageProperties()</div><div class="line">							.getDeliveryTag(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line">				&#125;</div><div class="line"></div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		<span class="keyword">return</span> container;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>打开TestController中的service调用，创建一个service，如<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> pre.example.mq.mq.data.service;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="keyword">import</span> pre.example.mq.mq.MessageProducer;</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MqSendService</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> MessageProducer messageProducer;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">    * <span class="doctag">@Title</span>: sendMsg</div><div class="line">    * <span class="doctag">@Description</span>: 发送消息</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMsg</span><span class="params">()</span></span>&#123;</div><div class="line">        messageProducer.sendMessage(<span class="string">"info.red.a"</span>);</div><div class="line">        messageProducer.sendMessage(<span class="string">"info.red.b"</span>);</div><div class="line">        messageProducer.sendMessage(<span class="string">"info.black.a"</span>);</div><div class="line">        messageProducer.sendMessage(<span class="string">"err.red.a"</span>);</div><div class="line">        messageProducer.sendMessage(<span class="string">"info.red.a.a"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>MessageProducer.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> pre.example.mq.mq;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.amqp.core.AmqpTemplate;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="keyword">import</span> pre.example.mq.config.AmqpConfig;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageProducer</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger LOG = LoggerFactory.getLogger(MessageProducer.class);</div><div class="line"></div><div class="line">	<span class="meta">@Resource</span></div><div class="line">	<span class="keyword">private</span> AmqpTemplate rabbitTemplate;</div><div class="line">	<span class="comment">/*public void setRabbitTemplate(RabbitTemplate rabbitTemplate) &#123; // amqp 1.3.5之前版本需要显示设置消息确认，无法直接使用AmqpTemplate，需要使用RabbitTemplate</span></div><div class="line">		this.rabbitTemplate = rabbitTemplate;</div><div class="line">		this.rabbitTemplate.setConfirmCallback(new RabbitTemplate.ConfirmCallback()&#123;</div><div class="line">		     @Override</div><div class="line">		     public void confirm(CorrelationData correlationData, boolean ack, String cause) &#123;</div><div class="line">		         if (ack) &#123;</div><div class="line">		             System.out.println("消息确认成功");</div><div class="line">		         &#125; else &#123;</div><div class="line">		             //处理丢失的消息（nack）</div><div class="line">		            System.out.println("消息确认失败");</div><div class="line">		         &#125;</div><div class="line">		     &#125;</div><div class="line">		&#125;);</div><div class="line">	&#125;*/</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(Object message)</span> </span>&#123;</div><div class="line">		LOG.debug(<span class="string">"to send message:&#123;&#125;"</span>, message);</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			rabbitTemplate.convertAndSend(AmqpConfig.EXCHANGE, message.toString(), message);</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			LOG.error(<span class="string">"发送队列消息错："</span> + <span class="string">""</span>, e);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>发送者很简单，这里我们通过接口访问的形式，调用了MessageProducer的sendMessage方法，rabbitTemplate.convertAndSend是发送消息的调用，第一个参数表示交换机，使用mq的订阅功能并不需要理会queue，只需要指定交换机，这里的交换机需要跟消费者一样；第二个参数是关键字匹配，如这里发送了5条消息，关键字如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">messageProducer.sendMessage(&quot;info.red.a&quot;);</div><div class="line">messageProducer.sendMessage(&quot;info.red.b&quot;);</div><div class="line">messageProducer.sendMessage(&quot;info.black.a&quot;);</div><div class="line">messageProducer.sendMessage(&quot;err.red.a&quot;);</div><div class="line">messageProducer.sendMessage(&quot;info.red.a.a&quot;);</div></pre></td></tr></table></figure></p>
<p>看到AmqpConfig.java类的binding方法，那里消费者匹配了info.red.#方法，*表示匹配一个，#表示匹配多个，所以这里发送的5条消息，只有1、2、4会被接收到，如果是info.red.* 则只有1、2会被接收。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/27/springboot+rabbitmq简单使用/" data-id="cj3uwjiwj002vw02ystz4r7e9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mq/">mq</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springboot/">springboot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-AOP拦截Controller" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/03/AOP拦截Controller/" class="article-date">
  <time datetime="2017-05-03T09:24:26.000Z" itemprop="datePublished">2017-05-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/AOP拦截Controller/">AOP拦截Controller处理@RequestBody注入参数问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>问题：</strong> 使用springMVC，一些请求前的校验，都可以在拦截器或者过滤器里做处理，处理完后到Controller层再根据喜好做相关操作，但是遇到content-type是application/json等放在body体里的就尴尬了，读完body，在Controller就无法再获取一次了，或许你可以把request的inputStream读出来缓存两份。但这要动根基了，不划算。另外，如果需要改变某个参数再由@RequestBody注入，又是一个尴尬的问题，可以把<mvc:message-converters>配置的Json处理写成自己的逻辑。但所有请求都经过这个也显得累赘。</mvc:message-converters></p>
<p><strong>键值形式的传参处理</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.sq580.mall.order.web;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.Filter;</div><div class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</div><div class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XxxInterceptor</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest arg0, ServletResponse arg1, FilterChain arg2)</span> <span class="keyword">throws</span> IOException,</span></div><div class="line">            ServletException &#123;</div><div class="line">        HttpServletRequest req = (HttpServletRequest) arg0;</div><div class="line">        ServletRequest requestWrapper = <span class="keyword">new</span> ParameterRequestWrapper(req);</div><div class="line">        String body = HttpHelper.getBodyString(requestWrapper);</div><div class="line">        System.out.println(body);</div><div class="line">        <span class="comment">// 自己拦截的逻辑</span></div><div class="line">        arg2.doFilter(requestWrapper, (HttpServletResponse) arg1);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig arg0)</span> <span class="keyword">throws</span> ServletException </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.xxx;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.nio.charset.Charset;</div><div class="line"><span class="keyword">import</span> java.util.Enumeration;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletInputStream;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequestWrapper;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParameterRequestWrapper</span> <span class="keyword">extends</span> <span class="title">HttpServletRequestWrapper</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] body;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ParameterRequestWrapper</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        <span class="keyword">super</span>(request);</div><div class="line">        body = HttpHelper.getBodyString(request).getBytes(Charset.forName(<span class="string">"UTF-8"</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> BufferedReader <span class="title">getReader</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(getInputStream()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> ServletInputStream <span class="title">getInputStream</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        <span class="keyword">final</span> ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(body);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServletInputStream() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">                <span class="keyword">return</span> bais.read();</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHeader</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getHeader(name);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title">getHeaderNames</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getHeaderNames();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title">getHeaders</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getHeaders(name);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>HttpHelper工具类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.xxx;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.nio.charset.Charset;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpHelper</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取请求Body</div><div class="line">     * <span class="doctag">@param</span> request</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getBodyString</span><span class="params">(ServletRequest request)</span> </span>&#123;</div><div class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line">        InputStream inputStream = <span class="keyword">null</span>;</div><div class="line">        BufferedReader reader = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            inputStream = request.getInputStream();</div><div class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(inputStream, Charset.forName(<span class="string">"UTF-8"</span>)));</div><div class="line">            String line = <span class="string">""</span>;</div><div class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">                sb.append(line);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="keyword">if</span> (inputStream != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    inputStream.close();</div><div class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    reader.close();</div><div class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sb.toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>requestFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.xxx.XxxInterceptor<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>requestFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>body传参处理</strong> 使用aop来切Controller中的方法，这时参数已经注入了，不存在重复读request流的问题<br><strong>注意：</strong> 这里开启aop的配置需要写在springmvc中，不能写在spring的applicationContext.xml中，两者有所区别<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">"true"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.xxx"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<p>切面的使用，注意要扫包<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Aspect</span></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PariseAspect</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">// 第一个*表示所有返回类型，第二段是com.xxx包下任何包的所有后缀为Controller的类的所有方法，(..)表示方法所带任何参数</span></div><div class="line">	<span class="meta">@Pointcut</span>(<span class="string">"execution(* com.xxx.*.*Controller.*(..))"</span>)    </div><div class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">controllerAspect</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">	<span class="comment">// @Before是指在方法执行前执行，@After指在方法执行后执行，这两个都好理解，@Around并不是在方法执行过程循环执行，它表示的是</span></div><div class="line">	<span class="comment">/* &#123;</span></div><div class="line">		// before</div><div class="line">		// 你可以让它继续执行，也可以返回，是这么一种环绕意义，有点类似过滤器</div><div class="line">		// after</div><div class="line">	&#125;*/</div><div class="line">	<span class="meta">@Around</span>(<span class="string">"controllerAspect()"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">checkToken</span><span class="params">(ProceedingJoinPoint point)</span> </span>&#123;</div><div class="line">		<span class="comment">// 获取所有参数，自己断点可以理解清楚点，一般第一个为@RequestBody所注入的对象，第二个为BindingResult，假设对象中有个userId，此处改变了对象的值后，通知继续执行</span></div><div class="line">		Object[] args = point.getArgs();</div><div class="line">		Class clazz = args[<span class="number">0</span>].getClass();</div><div class="line">		Method m = clazz.getDeclaredMethod(<span class="string">"setUserId"</span>, Long.class);</div><div class="line">		<span class="keyword">if</span> (<span class="keyword">null</span> != m) &#123;</div><div class="line">			m.invoke(arg, <span class="number">1L</span>);</div><div class="line">			args[<span class="number">1</span>] = arg;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="comment">// 返回错误</span></div><div class="line">			<span class="keyword">return</span> <span class="string">"error.jsp"</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> point.proceed(args);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/03/AOP拦截Controller/" data-id="cj3uwjiur0000w02y2iszf4pk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用redis维护token" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/03/使用redis维护token/" class="article-date">
  <time datetime="2017-05-03T09:23:40.000Z" itemprop="datePublished">2017-05-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/使用redis维护token/">使用redis维护token</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="用redis维护token的思路："><a href="#用redis维护token的思路：" class="headerlink" title="用redis维护token的思路："></a>用redis维护token的思路：</h3><h4 id="存入"><a href="#存入" class="headerlink" title="存入"></a>存入</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 生成token</span></div><div class="line">String token = UUID.randomUUID().toString();</div><div class="line"><span class="comment">// 将对象转为Json串</span></div><div class="line">String json = JacksonUtils.newInstance().obj2json(user);</div><div class="line"><span class="comment">// 以token为key，对象为value缓存到redis</span></div><div class="line">jedisUtils.set(token, json, <span class="number">120</span> * <span class="number">60</span>);</div><div class="line"><span class="comment">// 将userId - token以key - value的形式放入到一个hash表中，这里最好遵循标准的命名规则：（项目：模块：形式）</span></div><div class="line">jedisUtils.hset(<span class="string">"project:sso:uid_token"</span>, <span class="string">"project:sso:"</span>.concat(user.getUserId()), token);</div></pre></td></tr></table></figure>
<h4 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">String token = request.getHeader(<span class="string">"token"</span>);</div><div class="line"><span class="keyword">if</span>(<span class="keyword">null</span> != token &amp;&amp; StringUtils.isNotBlank(token)) &#123;</div><div class="line">	<span class="comment">// 获取key为token的对象，并续租token</span></div><div class="line">	String objJson = jedisUtils.get(token, <span class="number">120</span> * <span class="number">60</span>);</div><div class="line">	<span class="keyword">if</span> (objJson != <span class="keyword">null</span> &amp;&amp; StringUtils.isNotBlank(objJson)) &#123;</div><div class="line">		<span class="comment">// 获取对象</span></div><div class="line">		User user = JSON.parseObject(objJson, User.class);</div><div class="line">		<span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="comment">// 通过userid获取hash表中的token，并续租</span></div><div class="line">			String val = jedisUtils.get(key, <span class="number">120</span> * <span class="number">60</span>);</div><div class="line">			<span class="keyword">if</span> (val.equals(token)) &#123;</div><div class="line">				<span class="comment">// 通过验证</span></div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="comment">// 不通过验证</span></div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="comment">// 不通过验证</span></div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="comment">// 不通过验证</span></div><div class="line">	&#125;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="comment">// 提示需传token</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>如果只以键值的形式存储，会有以下几种问题：</strong><br>1、用户登录的时候重新分配了token，同一用户可重复登录<br>2、也可以以uid-token的形式存储，每次登录判断token是否一致，但这种就无法简略到只传token了<br><strong>用hash配合的逻辑</strong><br>1、存一对token-user<br>2、hash存uid-token<br>3、每次接收token后拿到user，用uid去获取token<br>4、比对两个token<br><strong>好处：</strong><br>B用户登录后，两个键值都改变了，A用户操作的时候用旧的token可以获取到user，但是hash中的token已经变了，所以验证不通过，因为设置了操作时效性，所以旧的token-user会在规定时间后失效，释放内存</p>
<p><strong>附：</strong> jedisUtils工具类见【Java操作redis】文章</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/03/使用redis维护token/" data-id="cj3uwjiwr003cw02ymaason5j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java下载文件损坏问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/Java下载文件损坏问题/" class="article-date">
  <time datetime="2017-04-21T06:30:19.000Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/21/Java下载文件损坏问题/">Java下载文件损坏问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="开发的过程中经常需要导出各种报表，生成表的过程此处不表。说说下载遇到的问题："><a href="#开发的过程中经常需要导出各种报表，生成表的过程此处不表。说说下载遇到的问题：" class="headerlink" title="开发的过程中经常需要导出各种报表，生成表的过程此处不表。说说下载遇到的问题："></a>开发的过程中经常需要导出各种报表，生成表的过程此处不表。说说下载遇到的问题：</h4><h5 id="下载可以分为2种，一种是将文件保存到某个位置，然后返回url让client进行访问下载，但大多数时候我们并不需要这些文件，这个时候就浪费了磁盘空间，即便后面做了清理，也是比较不友好的一种情况。所以我们一般都是直接以流的形式将文件传给client"><a href="#下载可以分为2种，一种是将文件保存到某个位置，然后返回url让client进行访问下载，但大多数时候我们并不需要这些文件，这个时候就浪费了磁盘空间，即便后面做了清理，也是比较不友好的一种情况。所以我们一般都是直接以流的形式将文件传给client" class="headerlink" title="下载可以分为2种，一种是将文件保存到某个位置，然后返回url让client进行访问下载，但大多数时候我们并不需要这些文件，这个时候就浪费了磁盘空间，即便后面做了清理，也是比较不友好的一种情况。所以我们一般都是直接以流的形式将文件传给client"></a>下载可以分为2种，一种是将文件保存到某个位置，然后返回url让client进行访问下载，但大多数时候我们并不需要这些文件，这个时候就浪费了磁盘空间，即便后面做了清理，也是比较不友好的一种情况。所以我们一般都是直接以流的形式将文件传给client</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/export"</span>)</div><div class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; export() &#123;</div><div class="line">	</div><div class="line">	<span class="keyword">byte</span>[] body = <span class="keyword">null</span>;</div><div class="line">	String url = <span class="string">"你的资源文件url"</span>;</div><div class="line">	HttpURLConnection conn = (HttpURLConnection) (<span class="keyword">new</span> URL(url)).openConnection();</div><div class="line">	<span class="comment">// 不管你是读本地文件，网络文件还是Workbook等等，这里以网络文件为例</span></div><div class="line">	InputStream in = conn.getInputStream();</div><div class="line"></div><div class="line">	body = <span class="keyword">new</span> <span class="keyword">byte</span>[in.available()];</div><div class="line">	in.read(body);</div><div class="line">        </div><div class="line">	HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</div><div class="line">	<span class="comment">// 响应头的名字和响应头的值</span></div><div class="line">	headers.add(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment;filename="</span> + <span class="string">"文件名，要加后缀"</span>);</div><div class="line">        </div><div class="line">	HttpStatus statusCode = HttpStatus.OK;</div><div class="line">        </div><div class="line">	ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; response = <span class="keyword">new</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt;(body, headers, statusCode);</div><div class="line">	<span class="keyword">return</span> response;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="以上的方法可以基本满足下载的功能，但是我在实际开发中导出excel文件，发现下载的Excel文件打开的时候已经损坏了，本来是读取HSSFWorkbook直接返回的，为了方便排查，把生成的excel保存在了本地再执行响应，发现本地的excel打开是正常的，而下载后的却是损坏的，后来查阅了资料发现，如果一次性将流转为byte可能会有丢失问题，于是改用如下方式，将流先缓存包装起来，再返回，通过。"><a href="#以上的方法可以基本满足下载的功能，但是我在实际开发中导出excel文件，发现下载的Excel文件打开的时候已经损坏了，本来是读取HSSFWorkbook直接返回的，为了方便排查，把生成的excel保存在了本地再执行响应，发现本地的excel打开是正常的，而下载后的却是损坏的，后来查阅了资料发现，如果一次性将流转为byte可能会有丢失问题，于是改用如下方式，将流先缓存包装起来，再返回，通过。" class="headerlink" title="以上的方法可以基本满足下载的功能，但是我在实际开发中导出excel文件，发现下载的Excel文件打开的时候已经损坏了，本来是读取HSSFWorkbook直接返回的，为了方便排查，把生成的excel保存在了本地再执行响应，发现本地的excel打开是正常的，而下载后的却是损坏的，后来查阅了资料发现，如果一次性将流转为byte可能会有丢失问题，于是改用如下方式，将流先缓存包装起来，再返回，通过。"></a>以上的方法可以基本满足下载的功能，但是我在实际开发中导出excel文件，发现下载的Excel文件打开的时候已经损坏了，本来是读取HSSFWorkbook直接返回的，为了方便排查，把生成的excel保存在了本地再执行响应，发现本地的excel打开是正常的，而下载后的却是损坏的，后来查阅了资料发现，如果一次性将流转为byte可能会有丢失问题，于是改用如下方式，将流先缓存包装起来，再返回，通过。</h5><h4 id="修改代码如下"><a href="#修改代码如下" class="headerlink" title="修改代码如下"></a>修改代码如下</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">HttpURLConnection conn = (HttpURLConnection) (<span class="keyword">new</span> URL(url)).openConnection();</div><div class="line">InputStream in = conn.getInputStream();</div><div class="line">	</div><div class="line">ByteArrayOutputStream swapStream = <span class="keyword">new</span> ByteArrayOutputStream();  </div><div class="line"><span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];  </div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;  </div><div class="line"><span class="keyword">while</span> ((len = in.read(buff, <span class="number">0</span>, <span class="number">100</span>)) &gt; <span class="number">0</span>) &#123;  </div><div class="line">	swapStream.write(buff, <span class="number">0</span>, len);  </div><div class="line">&#125;  </div><div class="line"><span class="keyword">byte</span>[] body = swapStream.toByteArray();</div><div class="line">       </div><div class="line">HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</div><div class="line"><span class="comment">// 响应头的名字和响应头的值</span></div><div class="line">headers.add(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment;filename="</span> + fileName);</div><div class="line">       </div><div class="line">HttpStatus statusCode = HttpStatus.OK;</div><div class="line">       </div><div class="line">ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; response = <span class="keyword">new</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt;(body, headers, statusCode);</div><div class="line"><span class="keyword">return</span> response;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/Java下载文件损坏问题/" data-id="cj3uwjiv8000iw02ywvi3uefy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring boot的入门使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/24/Spring boot的入门使用/" class="article-date">
  <time datetime="2017-01-24T08:25:49.000Z" itemprop="datePublished">2017-01-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/24/Spring boot的入门使用/">Spring boot的入门使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>pom.xml的配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">  <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>test<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>test<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">  </div><div class="line">  	<span class="comment">&lt;!-- 若已经有父项目依赖，则在父项目中添加如下代码 --&gt;</span></div><div class="line">  	<span class="comment">&lt;!-- &lt;dependencyManagement&gt;</span></div><div class="line">	&lt;dependencies&gt;</div><div class="line">	   &lt;dependency&gt;</div><div class="line">	       Import dependency management from Spring Boot</div><div class="line">	            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">	            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;</div><div class="line">	            &lt;version&gt;1.2.3.RELEASE&lt;/version&gt;</div><div class="line">	            &lt;type&gt;pom&lt;/type&gt;</div><div class="line">	            &lt;scope&gt;import&lt;/scope&gt;</div><div class="line">	        &lt;/dependency&gt;</div><div class="line">	    &lt;/dependencies&gt;</div><div class="line">	&lt;/dependencyManagement&gt; --&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">	    <span class="comment">&lt;!-- 项目编码配置 start --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 项目编码配置 end --&gt;</span></div><div class="line">		</div><div class="line">		<span class="comment">&lt;!-- 依赖的jar的版本号控制 start --&gt;</span></div><div class="line">		</div><div class="line">		<span class="comment">&lt;!-- 依赖的jar的版本号控制 end --&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line"></div><div class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">  </div><div class="line">	    <span class="comment">&lt;!-- 核心模块，包括自动配置支持、日志和YAML --&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">		    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">		    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">		</div><div class="line">	    <span class="comment">&lt;!-- 测试模块，包括JUnit、Hamcrest、Mockito --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">		    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">		    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">		</div><div class="line">		<span class="comment">&lt;!-- Web模块 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    </div><div class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">  </div><div class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springloaded<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                	<span class="comment">&lt;!-- 热部署配置 --&gt;</span></div><div class="line">		            <span class="tag">&lt;<span class="name">jvmArguments</span>&gt;</span></div><div class="line">		            	-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005</div><div class="line">		            <span class="tag">&lt;/<span class="name">jvmArguments</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- spring-boot 默认使用1.6，若使用其它版本，需要指定好相应版本 --&gt;</span></div><div class="line">	                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">	                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">	            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>model类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> per.test.mdoel;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * <span class="doctag">@Title</span>: User.java</div><div class="line"> * <span class="doctag">@Package</span> per.test.mdoel</div><div class="line"> * <span class="doctag">@Description</span>: 用户实体类</div><div class="line"> * <span class="doctag">@author</span> zoro</div><div class="line"> * <span class="doctag">@date</span> 2017年1月22日 下午5:09:58</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Long id;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> id;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.id = id;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">final</span> <span class="keyword">int</span> prime = <span class="number">31</span>;</div><div class="line">		<span class="keyword">int</span> result = <span class="number">1</span>;</div><div class="line">		result = prime * result + ((id == <span class="keyword">null</span>) ? <span class="number">0</span> : id.hashCode());</div><div class="line">		result = prime * result + ((name == <span class="keyword">null</span>) ? <span class="number">0</span> : name.hashCode());</div><div class="line">		<span class="keyword">return</span> result;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == obj)</div><div class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		<span class="keyword">if</span> (obj == <span class="keyword">null</span>)</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		<span class="keyword">if</span> (getClass() != obj.getClass())</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		User other = (User) obj;</div><div class="line">		<span class="keyword">if</span> (id == <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (other.id != <span class="keyword">null</span>)</div><div class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!id.equals(other.id))</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		<span class="keyword">if</span> (name == <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (other.name != <span class="keyword">null</span>)</div><div class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"User [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Controller类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> per.test.controller;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</div><div class="line"></div><div class="line"><span class="keyword">import</span> per.test.mdoel.User;</div><div class="line"></div><div class="line"><span class="comment">/**  </span></div><div class="line"> * <span class="doctag">@Title</span>: UserController.java</div><div class="line"> * <span class="doctag">@Package</span> per.test.controller</div><div class="line"> * <span class="doctag">@Description</span>: 用户请求控制类</div><div class="line"> * <span class="doctag">@author</span> zoro</div><div class="line"> * <span class="doctag">@date</span> 2017年1月22日 下午5:31:52</div><div class="line"> * pre: </div><div class="line"> * 	<span class="doctag">@Controller</span> + <span class="doctag">@EnableAutoConfiguration</span> = <span class="doctag">@RestController</span></div><div class="line"> */</div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</div><div class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">view</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long id) </span>&#123;</div><div class="line">		User user = <span class="keyword">new</span> User();</div><div class="line">        user.setId(id);</div><div class="line">        user.setName(<span class="string">"zhang"</span>);</div><div class="line">        <span class="keyword">return</span> user;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> per.test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><div class="line"></div><div class="line"><span class="comment">/**  </span></div><div class="line"> * <span class="doctag">@Title</span>: UserController.java</div><div class="line"> * <span class="doctag">@Package</span> per.test.controller</div><div class="line"> * <span class="doctag">@Description</span>: 用户请求控制类</div><div class="line"> * <span class="doctag">@author</span> zoro</div><div class="line"> * <span class="doctag">@date</span> 2017年1月22日 下午5:33:01</div><div class="line"> * pre: </div><div class="line"> * 	<span class="doctag">@SpringBootApplication</span>继承了 <span class="doctag">@Configuration</span>、 <span class="doctag">@EnableAutoConfiguration</span>、 <span class="doctag">@ComponentScan</span></div><div class="line"> */</div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppTest</span> </span>&#123;</div><div class="line">	</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    	SpringApplication.run(AppTest.class);</div><div class="line">	&#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/01/24/Spring boot的入门使用/" data-id="cj3uwjivn0017w02y1k5hi0mk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Srping-boot/">Srping boot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-maven打包可执行项目" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/17/maven打包可执行项目/" class="article-date">
  <time datetime="2017-01-17T07:25:49.000Z" itemprop="datePublished">2017-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/17/maven打包可执行项目/">maven打包可执行项目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>pom.xml配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">archive</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">manifest</span>&gt;</span></div><div class="line">						<span class="comment">&lt;!-- 项目主清单（main）入口类 --&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.test.TestMain<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">archive</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">descriptors</span>&gt;</span></div><div class="line">					<span class="comment">&lt;!-- 因为不是web程序，所以需要另外增加assmbly.xml文件 --&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">descriptor</span>&gt;</span>assembly.xml<span class="tag">&lt;/<span class="name">descriptor</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">descriptors</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">id</span>&gt;</span>make-assembly<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">						<span class="tag">&lt;<span class="name">goal</span>&gt;</span>single<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">					<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>assmbly.xml（放在pom.xml同目录下）文件配置如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">id</span>&gt;</span>uberjar<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">formats</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">format</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">format</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">formats</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">includeBaseDirectory</span>&gt;</span>false<span class="tag">&lt;/<span class="name">includeBaseDirectory</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">dependencySets</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dependencySet</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 引用的第三方jar包是否解压，如果为true，则解压第三方jar包为单独的文件目录；如果为false，则是将第三方jar包打进工程jar包下 --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">unpack</span>&gt;</span>true<span class="tag">&lt;/<span class="name">unpack</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">dependencySet</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">dependencySets</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">fileSets</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">fileSet</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;project.build.outputDirectory&#125;<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">fileSet</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">fileSets</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">assembly</span>&gt;</span></div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/01/17/maven打包可执行项目/" data-id="cj3uwjiwd002iw02yg5xeoymb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-maven引用外部jar包" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/17/maven引用外部jar包/" class="article-date">
  <time datetime="2017-01-17T07:20:15.000Z" itemprop="datePublished">2017-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/17/maven引用外部jar包/">maven引用外部jar包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>从路径读取jar的方式，比较好的做法是在项目中建一个lib目录来存放jar包<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>postmsg-ump<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>postmsg-ump<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 版本随便，为了好管理从1.0开始写，我这里已经迭代很多了 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- basedir表示根目录，如果不在项目中则写绝对路径，如d:\\postmsg-ump-2.4.jar --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>$&#123;basedir&#125;\src\lib\postmsg-ump-2.4.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>也可以用命令的方式将jar包导入本地仓库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn install:install-file -DgroupId=postmsg-ump -DartifactId=postmsg-ump -Dversion=2.4 -Dpackaging=jar -Dfile=d:\postmsg-ump-2.4.jar</div></pre></td></tr></table></figure></p>
<p>-Dfile表示要加入仓库的jar包路径，执行命令后，在pom.xml中则不需要system和systemPath这两项了，但是不推荐使用这种方式，因为实际开发的过程中常需要协同开发，当把项目提交到代码库，从另一个地方把项目check out的之后，发现少了包</p>
<p><strong>最好的方法也是推荐的方法是建立一个共享私库，比如nexus</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/01/17/maven引用外部jar包/" data-id="cj3uwjiwb002dw02ycw6dmpo7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SpringMvc整合Swagger UI" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/14/SpringMvc整合Swagger UI/" class="article-date">
  <time datetime="2017-01-14T01:48:05.000Z" itemprop="datePublished">2017-01-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/14/SpringMvc整合Swagger UI/">SpringMvc整合Swagger UI</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先，导入主要的jar包<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- swagger-springmvc start --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mangofactory<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-springmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mangofactory<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-models<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.wordnik<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- swagger-springmvc end --&gt;</span></div></pre></td></tr></table></figure></p>
<p>定义一个config类来实现swagger的配置<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> test.util;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.inject.Inject;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</div><div class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</div><div class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.mangofactory.swagger.configuration.SpringSwaggerConfig;</div><div class="line"><span class="keyword">import</span> com.mangofactory.swagger.models.dto.ApiInfo;</div><div class="line"><span class="keyword">import</span> com.mangofactory.swagger.plugin.EnableSwagger;</div><div class="line"><span class="keyword">import</span> com.mangofactory.swagger.plugin.SwaggerSpringMvcPlugin;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@EnableWebMvc</span></div><div class="line"><span class="meta">@EnableSwagger</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> SpringSwaggerConfig springSwaggerConfig;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> SpringSwaggerConfig <span class="title">getSpringSwaggerConfig</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> springSwaggerConfig;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Inject</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSpringSwaggerConfig</span><span class="params">(SpringSwaggerConfig springSwaggerConfig)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.springSwaggerConfig = springSwaggerConfig;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Bean</span></div><div class="line">	<span class="function"><span class="keyword">public</span> SwaggerSpringMvcPlugin <span class="title">customImplementation</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> SwaggerSpringMvcPlugin</div><div class="line">				(<span class="keyword">this</span>.springSwaggerConfig)</div><div class="line">				.apiInfo(apiInfo())</div><div class="line">				.includePatterns(<span class="string">".*?"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</div><div class="line">		ApiInfo apiInfo = <span class="keyword">new</span> ApiInfo(</div><div class="line">                <span class="string">"系统管理平台API"</span>,</div><div class="line">                <span class="string">""</span>,</div><div class="line">                <span class="string">""</span>, </div><div class="line">                <span class="string">""</span>,</div><div class="line">                <span class="string">""</span>,</div><div class="line">                <span class="string">""</span>);</div><div class="line">        <span class="keyword">return</span> apiInfo;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在网上可能会看到@WebAppConfiguration配置，那是测试时候用的，发布的时候需要用@Configuration代替，@Configuration等价于xml里的beans标签，@EnableWebMvc注解驱动，将@RequestMapping的传入请求映射到一定的方法@Controller -annotated类的支持，@EnableSwagger自动注入SpringSwaggerConfig</p>
<p>上面的代码写完后springSwaggerConfig可能是null，因为还没有注入，有可能是@EnableSwagger没被扫到，也有可能是无效，加上以下配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.mangofactory.swagger.configuration.SpringSwaggerConfig"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<p>也有可能没有报错，就是启动的时候并没有把Controller中的url管理起来，原因是需要在启动时注入我们自己写的配置，加入以下代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- swaggerUI 开始 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"test.SwaggerConfig"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- swaggerUI 结束 --&gt;</span></div></pre></td></tr></table></figure></p>
<p>有如下的几种使用方式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Api</span>(value = <span class="string">"/user"</span>, description = <span class="string">"用户操作接口"</span>, position = <span class="number">1</span>) </div><div class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"/user/getdetail"</span>, httpMethod = <span class="string">"POST"</span>, notes = <span class="string">"获取用户详细信息"</span>, response = DetailResponseVo.class)</div><div class="line"><span class="meta">@ApiResponses</span>(value = &#123;  </div><div class="line">	<span class="meta">@ApiResponse</span>(code = <span class="number">200</span>, message = <span class="string">"操作成功！"</span>, response = DetailResponseVo.class),  </div><div class="line">	<span class="meta">@ApiResponse</span>(code = <span class="number">404</span>, message = <span class="string">"找不到页面"</span>),  </div><div class="line">	<span class="meta">@ApiResponse</span>(code = <span class="number">500</span>, message = <span class="string">"内部报错"</span>)&#125;</div><div class="line">)</div><div class="line"><span class="meta">@ApiModel</span>(value = <span class="string">"用户信息"</span>)</div><div class="line"><span class="meta">@ApiModelProperty</span>(value = <span class="string">"用户id"</span>)</div></pre></td></tr></table></figure></p>
<p>说明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@Api表示一个开放的API，简要描述该API的功能。</div><div class="line">在一个@API下，可有多个@ApiOperation，表示针对该API的CRUD操作。在ApiOperation Annotation中可以通过value，notes描述该操作的作用，response描述正常情况下该请求的返回对象类型。</div><div class="line">在一个ApiOperation下，可以通过ApiResponses描述该API操作可能出现的情况。</div><div class="line">@ApiParam用于描述该API操作接受的参数类型</div><div class="line">@ApiModel用在类上</div><div class="line">@ApiModelProperty用在类中的属性上</div></pre></td></tr></table></figure></p>
<p>展示　<a href="https://github.com/swagger-api/swagger-ui" title="https://github.com/swagger-api/swagger-ui" target="_blank" rel="external">Swagger-UI下载地址</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">从github下载Swagger-UI, 解压后把该项目dist目录下的内容拷贝到自己的项目中，</div><div class="line">最好在webapp下建一个swagger目录来存放，编辑swagger/index.html文件，</div><div class="line">找到url = &quot;http://petstore.swagger.io/v2/swagger.json&quot;;这一句，</div><div class="line">修改为url = &quot;/projectName/api-docs&quot;;</div><div class="line">projectName是指自己的项目名字；</div><div class="line">也可以写成http://&#123;ip&#125;:&#123;port&#125;/&#123;projectName&#125;/api-docs这个格式</div></pre></td></tr></table></figure></p>
<p>因为springMvc会拦截静态资源，所以还需加上下面的过滤配置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/swagger/**"</span> <span class="attr">location</span>=<span class="string">"/swagger/"</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>打开浏览器直接访问swagger目录下的index.html文件即可，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://localhost:8080/projectName/swagger/index.html</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/01/14/SpringMvc整合Swagger UI/" data-id="cj3uwjivs001hw02yixr5o7p0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringMvc/">SpringMvc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/api/">api</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AngularJs/">AngularJs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swimming/">Swimming</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/eclipse/">eclipse</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kong/">kong</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJs/">AngularJs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMvc/">SpringMvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Srping-boot/">Srping boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swimming/">Swimming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/">Tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel/">excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hibernate/">hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kong/">kong</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/">mq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AngularJs/" style="font-size: 10px;">AngularJs</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/SpringMvc/" style="font-size: 12.5px;">SpringMvc</a> <a href="/tags/Srping-boot/" style="font-size: 10px;">Srping boot</a> <a href="/tags/Swimming/" style="font-size: 10px;">Swimming</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/eclipse/" style="font-size: 17.5px;">eclipse</a> <a href="/tags/excel/" style="font-size: 10px;">excel</a> <a href="/tags/hibernate/" style="font-size: 10px;">hibernate</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/js/" style="font-size: 12.5px;">js</a> <a href="/tags/kong/" style="font-size: 10px;">kong</a> <a href="/tags/maven/" style="font-size: 12.5px;">maven</a> <a href="/tags/mq/" style="font-size: 10px;">mq</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 12.5px;">mysql</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/10/游泳攻略/">游泳攻略</a>
          </li>
        
          <li>
            <a href="/2017/06/05/使用kong管理api/">使用kong管理api</a>
          </li>
        
          <li>
            <a href="/2017/05/27/springboot+rabbitmq简单使用/">springboot+rabbitmq简单使用</a>
          </li>
        
          <li>
            <a href="/2017/05/03/AOP拦截Controller/">AOP拦截Controller处理@RequestBody注入参数问题</a>
          </li>
        
          <li>
            <a href="/2017/05/03/使用redis维护token/">使用redis维护token</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>